import{bj as _e,R as Ee,r as S,aP as X,v as Ae,z as H,c2 as ee,A as Oe,f as M,o as j,d as te,c3 as Re,c4 as Ve,c5 as Me,y as qe,aQ as Z,aw as Ue,a as Ne,b as Be,c as F,w as I,e as x,ax as $e,c6 as De,g as z,F as ae,i as oe,aE as Fe,az as ze,aA as Ge,k as V,aa as ne,t as G,aC as Ke,am as ie,aD as Ze,h as He,j as Q}from"./index-DA9jGqo6.js";import{b as le}from"./route-block-B_A1xBdJ.js";import{V as Je}from"./VList-Bf68H6Nb.js";import{V as We,a as Xe,b as Qe}from"./VListItem-CUkEbiw7.js";import{V as Ye}from"./VTextarea-BCZhib3K.js";import{V as et}from"./VContainer-C3jUjEf3.js";import"./ssrBoot-C9nU99c7.js";import"./VDivider-UkByiMj5.js";(function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".mapdiv[data-v-289550ca]{width:100%;height:100%}.advanced-marker-wrapper{display:none}.mapdiv .advanced-marker-wrapper{display:inline-block}.custom-control-wrapper[data-v-ab9120cd]{display:none}.mapdiv .custom-control-wrapper[data-v-ab9120cd]{display:inline-block}.info-window-wrapper[data-v-f0c09f6e]{display:none}.mapdiv .info-window-wrapper[data-v-f0c09f6e]{display:inline-block}.custom-marker-wrapper[data-v-2d2d343a]{display:none}.mapdiv .custom-marker-wrapper[data-v-2d2d343a]{display:inline-block}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();var tt=Object.defineProperty,rt=(e,t,r)=>t in e?tt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,se=(e,t,r)=>(rt(e,typeof t!="symbol"?t+"":t,r),r);const Ie=Symbol("map"),xe=Symbol("api"),at=Symbol("marker"),ot=Symbol("markerCluster"),je=Symbol("CustomMarker"),nt=Symbol("mapTilesLoaded"),Pe=["click","dblclick","drag","dragend","dragstart","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];function it(e,t,r,a){function o(n){return n instanceof r?n:new r(function(i){i(n)})}return new(r||(r=Promise))(function(n,i){function l(f){try{m(a.next(f))}catch(c){i(c)}}function d(f){try{m(a.throw(f))}catch(c){i(c)}}function m(f){f.done?n(f.value):o(f.value).then(l,d)}m((a=a.apply(e,[])).next())})}function lt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var ue,ce;function st(){return ce||(ce=1,ue=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var a,o,n;if(Array.isArray(t)){if(a=t.length,a!=r.length)return!1;for(o=a;o--!==0;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(n=Object.keys(t),a=n.length,a!==Object.keys(r).length)return!1;for(o=a;o--!==0;)if(!Object.prototype.hasOwnProperty.call(r,n[o]))return!1;for(o=a;o--!==0;){var i=n[o];if(!e(t[i],r[i]))return!1}return!0}return t!==t&&r!==r}),ue}var ut=st(),ct=lt(ut);const de="__googleMapsScriptId";var U;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(U||(U={}));class T{constructor({apiKey:t,authReferrerPolicy:r,channel:a,client:o,id:n=de,language:i,libraries:l=[],mapIds:d,nonce:m,region:f,retries:c=3,url:h="https://maps.googleapis.com/maps/api/js",version:u}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=a,this.client=o,this.id=n||de,this.language=i,this.libraries=l,this.mapIds=d,this.nonce=m,this.region=f,this.retries=c,this.url=h,this.version=u,T.instance){if(!ct(this.options,T.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(T.instance.options)}`);return T.instance}T.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?U.FAILURE:this.done?U.SUCCESS:this.loading?U.LOADING:U.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(a=>{a?r(a.error):t(window.google)})})}importLibrary(t){return this.execute(),google.maps.importLibrary(t)}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){var t,r;if(document.getElementById(this.id)){this.callback();return}const a={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(a).forEach(n=>!a[n]&&delete a[n]),!((r=(t=window==null?void 0:window.google)===null||t===void 0?void 0:t.maps)===null||r===void 0)&&r.importLibrary||(n=>{let i,l,d,m="The Google Maps JavaScript API",f="google",c="importLibrary",h="__ib__",u=document,s=window;s=s[f]||(s[f]={});const p=s.maps||(s.maps={}),w=new Set,k=new URLSearchParams,b=()=>i||(i=new Promise((E,P)=>it(this,void 0,void 0,function*(){var R;yield l=u.createElement("script"),l.id=this.id,k.set("libraries",[...w]+"");for(d in n)k.set(d.replace(/[A-Z]/g,$=>"_"+$[0].toLowerCase()),n[d]);k.set("callback",f+".maps."+h),l.src=this.url+"?"+k,p[h]=E,l.onerror=()=>i=P(Error(m+" could not load.")),l.nonce=this.nonce||((R=u.querySelector("script[nonce]"))===null||R===void 0?void 0:R.nonce)||"",u.head.append(l)})));p[c]?console.warn(m+" only loads once. Ignoring:",n):p[c]=(E,...P)=>w.add(E)&&b().then(()=>p[c](E,...P))})(a);const o=this.libraries.map(n=>this.importLibrary(n));o.length||o.push(this.importLibrary("core")),Promise.all(o).then(()=>this.callback(),n=>{const i=new ErrorEvent("error",{error:n});this.loadErrorCallback(i)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}function dt(e){return class extends e.OverlayView{constructor(t){super(),se(this,"element"),se(this,"opts");const{element:r,...a}=t;this.element=r,this.opts=a,this.opts.map&&this.setMap(this.opts.map)}getPosition(){return this.opts.position?this.opts.position instanceof e.LatLng?this.opts.position:new e.LatLng(this.opts.position):null}getVisible(){if(!this.element)return!1;const t=this.element;return t.style.display!=="none"&&t.style.visibility!=="hidden"&&(t.style.opacity===""||Number(t.style.opacity)>.01)}onAdd(){if(!this.element)return;const t=this.getPanes();t&&t.overlayMouseTarget.appendChild(this.element)}draw(){if(!this.element)return;const t=this.getProjection(),r=t==null?void 0:t.fromLatLngToDivPixel(this.getPosition());if(r){this.element.style.position="absolute";let a,o;switch(this.opts.anchorPoint){case"TOP_CENTER":a="-50%",o="-100%";break;case"BOTTOM_CENTER":a="-50%",o="0";break;case"LEFT_CENTER":a="-100%",o="-50%";break;case"RIGHT_CENTER":a="0",o="-50%";break;case"TOP_LEFT":a="-100%",o="-100%";break;case"TOP_RIGHT":a="0",o="-100%";break;case"BOTTOM_LEFT":a="-100%",o="0";break;case"BOTTOM_RIGHT":a="0",o="0";break;default:a="-50%",o="-50%"}const n=r.x+(this.opts.offsetX||0)+"px",i=r.y+(this.opts.offsetY||0)+"px";this.element.style.transform=`translateX(${a}) translateX(${n}) translateY(${o}) translateY(${i})`,this.opts.zIndex&&(this.element.style.zIndex=this.opts.zIndex.toString())}}onRemove(){this.element&&this.element.remove()}setOptions(t){const{element:r,...a}=t;this.element=r,this.opts=a,this.draw()}}}let pe;const fe=["bounds_changed","center_changed","click","contextmenu","dblclick","drag","dragend","dragstart","heading_changed","idle","isfractionalzoomenabled_changed","mapcapabilities_changed","maptypeid_changed","mousemove","mouseout","mouseover","projection_changed","renderingtype_changed","rightclick","tilesloaded","tilt_changed","zoom_changed"],pt=_e({props:{apiPromise:{type:Promise},apiKey:{type:String,default:""},version:{type:String,default:"weekly"},libraries:{type:Array,default:()=>["places","marker"]},region:{type:String,required:!1},language:{type:String,required:!1},backgroundColor:{type:String,required:!1},center:{type:Object,default:()=>({lat:0,lng:0})},clickableIcons:{type:Boolean,required:!1,default:void 0},colorScheme:{type:String,required:!1},controlSize:{type:Number,required:!1},disableDefaultUi:{type:Boolean,required:!1,default:void 0},disableDoubleClickZoom:{type:Boolean,required:!1,default:void 0},draggable:{type:Boolean,required:!1,default:void 0},draggableCursor:{type:String,required:!1},draggingCursor:{type:String,required:!1},fullscreenControl:{type:Boolean,required:!1,default:void 0},fullscreenControlPosition:{type:String,required:!1},gestureHandling:{type:String,required:!1},heading:{type:Number,required:!1},isFractionalZoomEnabled:{type:Boolean,required:!1,default:void 0},keyboardShortcuts:{type:Boolean,required:!1,default:void 0},mapTypeControl:{type:Boolean,required:!1,default:void 0},mapTypeControlOptions:{type:Object,required:!1},mapTypeId:{type:[Number,String],required:!1},mapId:{type:String,required:!1},maxZoom:{type:Number,required:!1},minZoom:{type:Number,required:!1},noClear:{type:Boolean,required:!1,default:void 0},panControl:{type:Boolean,required:!1,default:void 0},panControlPosition:{type:String,required:!1},restriction:{type:Object,required:!1},rotateControl:{type:Boolean,required:!1,default:void 0},rotateControlPosition:{type:String,required:!1},scaleControl:{type:Boolean,required:!1,default:void 0},scaleControlStyle:{type:Number,required:!1},scrollwheel:{type:Boolean,required:!1,default:void 0},streetView:{type:Object,required:!1},streetViewControl:{type:Boolean,required:!1,default:void 0},streetViewControlPosition:{type:String,required:!1},styles:{type:Array,required:!1},tilt:{type:Number,required:!1},zoom:{type:Number,required:!1},zoomControl:{type:Boolean,required:!1,default:void 0},zoomControlPosition:{type:String,required:!1},cameraControl:{type:Boolean,required:!1,default:void 0},cameraControlPosition:{type:String,required:!1},nonce:{type:String,default:""}},emits:fe,setup(e,{emit:t}){const r=S(),a=S(!1),o=S(),n=S(),i=S(!1);Z(Ie,o),Z(xe,n),Z(nt,i);const l=()=>{const c={...e};Object.keys(c).forEach(s=>{c[s]===void 0&&delete c[s]});const h=s=>{var p;return s?{position:(p=n.value)==null?void 0:p.ControlPosition[s]}:{}},u={scaleControlOptions:e.scaleControlStyle?{style:e.scaleControlStyle}:{},panControlOptions:h(e.panControlPosition),zoomControlOptions:h(e.zoomControlPosition),rotateControlOptions:h(e.rotateControlPosition),streetViewControlOptions:h(e.streetViewControlPosition),fullscreenControlOptions:h(e.fullscreenControlPosition),cameraControlOptions:h(e.cameraControlPosition),disableDefaultUI:e.disableDefaultUi};return{...c,...u}},d=H([n,o],([c,h])=>{const u=c,s=h;u&&s&&(u.event.addListenerOnce(s,"tilesloaded",()=>{i.value=!0}),setTimeout(d,0))},{immediate:!0}),m=()=>{try{const{apiKey:c,region:h,version:u,language:s,libraries:p,nonce:w}=e;pe=new T({apiKey:c,region:h,version:u,language:s,libraries:p,nonce:w})}catch(c){console.error(c)}},f=c=>{n.value=ee(c.maps),o.value=ee(new c.maps.Map(r.value,l()));const h=dt(n.value);n.value[je]=h,fe.forEach(s=>{var p;(p=o.value)==null||p.addListener(s,w=>t(s,w))}),a.value=!0;const u=Object.keys(e).filter(s=>!["apiPromise","apiKey","version","libraries","region","language","center","zoom","nonce"].includes(s)).map(s=>Ee(e,s));H([()=>e.center,()=>e.zoom,...u],([s,p],[w,k])=>{var b,E,P;const{center:R,zoom:$,...J}=l();(b=o.value)==null||b.setOptions(J),p!==void 0&&p!==k&&((E=o.value)==null||E.setZoom(p));const N=!w||s.lng!==w.lng||s.lat!==w.lat;s&&N&&((P=o.value)==null||P.panTo(s))})};return qe(()=>{e.apiPromise&&e.apiPromise instanceof Promise?e.apiPromise.then(f):(m(),pe.load().then(f))}),Oe(()=>{var c;i.value=!1,o.value&&((c=n.value)==null||c.event.clearInstanceListeners(o.value))}),{mapRef:r,ready:a,map:o,api:n,mapTilesLoaded:i}}}),ft=(e,t)=>{const r=e.__vccOpts||e;for(const[a,o]of t)r[a]=o;return r},mt={ref:"mapRef",class:"mapdiv"};function ht(e,t,r,a,o,n){return j(),M("div",null,[te("div",mt,null,512),Re(e.$slots,"default",Ve(Me({ready:e.ready,map:e.map,api:e.api,mapTilesLoaded:e.mapTilesLoaded})),void 0,!0)])}const vt=ft(pt,[["render",ht],["__scopeId","data-v-289550ca"]]);function gt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var yt=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var a,o,n;if(Array.isArray(t)){if(a=t.length,a!=r.length)return!1;for(o=a;o--!==0;)if(!e(t[o],r[o]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(n=Object.keys(t),a=n.length,a!==Object.keys(r).length)return!1;for(o=a;o--!==0;)if(!Object.prototype.hasOwnProperty.call(r,n[o]))return!1;for(o=a;o--!==0;){var i=n[o];if(!e(t[i],r[i]))return!1}return!0}return t!==t&&r!==r};const bt=gt(yt),wt=(e,t,r,a)=>{const o=S(),n=X(Ie,S()),i=X(xe,S()),l=X(ot,S()),d=Ae(()=>!!(l.value&&i.value&&(o.value instanceof i.value.Marker||o.value instanceof i.value[je])));return H([n,r],(m,[f,c])=>{var h,u,s;const p=!bt(r.value,c)||n.value!==f;!n.value||!i.value||!p||(o.value?(o.value.setOptions(r.value),d.value&&((h=l.value)==null||h.removeMarker(o.value),(u=l.value)==null||u.addMarker(o.value))):(o.value=ee(new i.value[e](r.value)),o.value&&(d.value?(s=l.value)==null||s.addMarker(o.value):o.value.setMap(n.value)),t.forEach(w=>{var k;(k=o.value)==null||k.addListener(w,b=>a(w,b))})))},{immediate:!0,flush:"post"}),Oe(()=>{var m,f;o.value&&((m=i.value)==null||m.event.clearInstanceListeners(o.value),d.value?(f=l.value)==null||f.removeMarker(o.value):o.value.setMap(null))}),o},me=["animation_changed","click","dblclick","rightclick","dragstart","dragend","drag","mouseover","mousedown","mouseout","mouseup","draggable_changed","clickable_changed","contextmenu","cursor_changed","flat_changed","zindex_changed","icon_changed","position_changed","shape_changed","title_changed","visible_changed"],kt=_e({name:"Marker",props:{options:{type:Object,required:!0}},emits:me,setup(e,{emit:t,expose:r,slots:a}){const o=Ee(e,"options"),n=wt("Marker",me,o,t);return Z(at,n),r({marker:n}),()=>{var i;return(i=a.default)==null?void 0:i.call(a)}}});Pe.concat(["bounds_changed"]);Pe.concat(["center_changed","radius_changed"]);var Ct=Object.getOwnPropertyNames,St=Object.getOwnPropertySymbols,_t=Object.prototype.hasOwnProperty;function he(e,t){return function(r,a,o){return e(r,a,o)&&t(r,a,o)}}function K(e){return function(t,r,a){if(!t||!r||typeof t!="object"||typeof r!="object")return e(t,r,a);var o=a.cache,n=o.get(t),i=o.get(r);if(n&&i)return n===r&&i===t;o.set(t,r),o.set(r,t);var l=e(t,r,a);return o.delete(t),o.delete(r),l}}function ve(e){return Ct(e).concat(St(e))}var Et=Object.hasOwn||function(e,t){return _t.call(e,t)};function A(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var Ot="__v",qt="__o",It="_owner",ge=Object.getOwnPropertyDescriptor,ye=Object.keys;function xt(e,t,r){var a=e.length;if(t.length!==a)return!1;for(;a-- >0;)if(!r.equals(e[a],t[a],a,a,e,t,r))return!1;return!0}function jt(e,t){return A(e.getTime(),t.getTime())}function Pt(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Lt(e,t){return e===t}function be(e,t,r){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var o=new Array(a),n=e.entries(),i,l,d=0;(i=n.next())&&!i.done;){for(var m=t.entries(),f=!1,c=0;(l=m.next())&&!l.done;){if(o[c]){c++;continue}var h=i.value,u=l.value;if(r.equals(h[0],u[0],d,c,e,t,r)&&r.equals(h[1],u[1],h[0],u[0],e,t,r)){f=o[c]=!0;break}c++}if(!f)return!1;d++}return!0}var Tt=A;function At(e,t,r){var a=ye(e),o=a.length;if(ye(t).length!==o)return!1;for(;o-- >0;)if(!Le(e,t,r,a[o]))return!1;return!0}function B(e,t,r){var a=ve(e),o=a.length;if(ve(t).length!==o)return!1;for(var n,i,l;o-- >0;)if(n=a[o],!Le(e,t,r,n)||(i=ge(e,n),l=ge(t,n),(i||l)&&(!i||!l||i.configurable!==l.configurable||i.enumerable!==l.enumerable||i.writable!==l.writable)))return!1;return!0}function Rt(e,t){return A(e.valueOf(),t.valueOf())}function Vt(e,t){return e.source===t.source&&e.flags===t.flags}function we(e,t,r){var a=e.size;if(a!==t.size)return!1;if(!a)return!0;for(var o=new Array(a),n=e.values(),i,l;(i=n.next())&&!i.done;){for(var d=t.values(),m=!1,f=0;(l=d.next())&&!l.done;){if(!o[f]&&r.equals(i.value,l.value,i.value,l.value,e,t,r)){m=o[f]=!0;break}f++}if(!m)return!1}return!0}function Mt(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function Ut(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function Le(e,t,r,a){return(a===It||a===qt||a===Ot)&&(e.$$typeof||t.$$typeof)?!0:Et(t,a)&&r.equals(e[a],t[a],a,a,e,t,r)}var Nt="[object Arguments]",Bt="[object Boolean]",$t="[object Date]",Dt="[object Error]",Ft="[object Map]",zt="[object Number]",Gt="[object Object]",Kt="[object RegExp]",Zt="[object Set]",Ht="[object String]",Jt="[object URL]",Wt=Array.isArray,ke=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Ce=Object.assign,Xt=Object.prototype.toString.call.bind(Object.prototype.toString);function Qt(e){var t=e.areArraysEqual,r=e.areDatesEqual,a=e.areErrorsEqual,o=e.areFunctionsEqual,n=e.areMapsEqual,i=e.areNumbersEqual,l=e.areObjectsEqual,d=e.arePrimitiveWrappersEqual,m=e.areRegExpsEqual,f=e.areSetsEqual,c=e.areTypedArraysEqual,h=e.areUrlsEqual;return function(u,s,p){if(u===s)return!0;if(u==null||s==null)return!1;var w=typeof u;if(w!==typeof s)return!1;if(w!=="object")return w==="number"?i(u,s,p):w==="function"?o(u,s,p):!1;var k=u.constructor;if(k!==s.constructor)return!1;if(k===Object)return l(u,s,p);if(Wt(u))return t(u,s,p);if(ke!=null&&ke(u))return c(u,s,p);if(k===Date)return r(u,s,p);if(k===RegExp)return m(u,s,p);if(k===Map)return n(u,s,p);if(k===Set)return f(u,s,p);var b=Xt(u);return b===$t?r(u,s,p):b===Kt?m(u,s,p):b===Ft?n(u,s,p):b===Zt?f(u,s,p):b===Gt?typeof u.then!="function"&&typeof s.then!="function"&&l(u,s,p):b===Jt?h(u,s,p):b===Dt?a(u,s,p):b===Nt?l(u,s,p):b===Bt||b===zt||b===Ht?d(u,s,p):!1}}function Yt(e){var t=e.circular,r=e.createCustomConfig,a=e.strict,o={areArraysEqual:a?B:xt,areDatesEqual:jt,areErrorsEqual:Pt,areFunctionsEqual:Lt,areMapsEqual:a?he(be,B):be,areNumbersEqual:Tt,areObjectsEqual:a?B:At,arePrimitiveWrappersEqual:Rt,areRegExpsEqual:Vt,areSetsEqual:a?he(we,B):we,areTypedArraysEqual:a?B:Mt,areUrlsEqual:Ut};if(r&&(o=Ce({},o,r(o))),t){var n=K(o.areArraysEqual),i=K(o.areMapsEqual),l=K(o.areObjectsEqual),d=K(o.areSetsEqual);o=Ce({},o,{areArraysEqual:n,areMapsEqual:i,areObjectsEqual:l,areSetsEqual:d})}return o}function er(e){return function(t,r,a,o,n,i,l){return e(t,r,l)}}function tr(e){var t=e.circular,r=e.comparator,a=e.createState,o=e.equals,n=e.strict;if(a)return function(l,d){var m=a(),f=m.cache,c=f===void 0?t?new WeakMap:void 0:f,h=m.meta;return r(l,d,{cache:c,equals:o,meta:h,strict:n})};if(t)return function(l,d){return r(l,d,{cache:new WeakMap,equals:o,meta:void 0,strict:n})};var i={cache:void 0,equals:o,meta:void 0,strict:n};return function(l,d){return r(l,d,i)}}L();L({strict:!0});L({circular:!0});L({circular:!0,strict:!0});L({createInternalComparator:function(){return A}});L({strict:!0,createInternalComparator:function(){return A}});L({circular:!0,createInternalComparator:function(){return A}});L({circular:!0,createInternalComparator:function(){return A},strict:!0});function L(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,a=e.createInternalComparator,o=e.createState,n=e.strict,i=n===void 0?!1:n,l=Yt(e),d=Qt(l),m=a?a(d):er(d);return tr({circular:r,comparator:d,createState:o,equals:m,strict:i})}var re;(function(e){e.CLUSTERING_BEGIN="clusteringbegin",e.CLUSTERING_END="clusteringend",e.CLUSTER_CLICK="click",e.GMP_CLICK="gmp-click"})(re||(re={}));Object.values(re);const C=[];for(let e=0;e<256;++e)C.push((e+256).toString(16).slice(1));function rr(e,t=0){return(C[e[t+0]]+C[e[t+1]]+C[e[t+2]]+C[e[t+3]]+"-"+C[e[t+4]]+C[e[t+5]]+"-"+C[e[t+6]]+C[e[t+7]]+"-"+C[e[t+8]]+C[e[t+9]]+"-"+C[e[t+10]]+C[e[t+11]]+C[e[t+12]]+C[e[t+13]]+C[e[t+14]]+C[e[t+15]]).toLowerCase()}let Y;const ar=new Uint8Array(16);function or(){if(!Y){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");Y=crypto.getRandomValues.bind(crypto)}return Y(ar)}const nr=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Se={randomUUID:nr};function ir(e,t,r){var o;if(Se.randomUUID&&!e)return Se.randomUUID();e=e||{};const a=e.random??((o=e.rng)==null?void 0:o.call(e))??or();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=a[6]&15|64,a[8]=a[8]&63|128,rr(a)}const lr={key:0,class:"text-caption grey--text mt-1"},sr={key:0,style:{"max-height":"420px","overflow-y":"auto"}},ur={class:"text-caption grey--text ml-2"},cr={key:1,class:"text-center grey--text"},Te={__name:"map",setup(e){const t="AIzaSyAFZNUQdaGX43QtTDpNcMXlBDjiNCWHCiU",r=Ne(),a=r.isLoggedIn?r.account:null,o=S({lat:25.033964,lng:121.564468}),n=S([]),i=S(null),l=S(!1),d=S(""),m=S([]),f=S(""),c=S(null);let h=null;const u={};function s(y){if(!u[y]){const g=`hsl(${Math.floor(Math.random()*360)}, 70%, 50%)`;u[y]=g}return u[y]}function p(){return new Promise(y=>{var g,O;if((O=(g=window.google)==null?void 0:g.maps)!=null&&O.places)y();else{const v=setInterval(()=>{var _,q;(q=(_=window.google)==null?void 0:_.maps)!=null&&q.places&&(clearInterval(v),y())},100)}})}qe(async()=>{const y=localStorage.getItem("markers");n.value=y?JSON.parse(y):[],await p();const g=new google.maps.Geocoder,O=n.value.map(v=>new Promise(_=>{v.address?_():g.geocode({location:v.position},(q,D)=>{D==="OK"&&q[0]?v.address=q[0].formatted_address:v.address=`${v.position.lat.toFixed(5)}, ${v.position.lng.toFixed(5)}`,_()})}));await Promise.all(O),E(),c.value&&(h=new google.maps.places.Autocomplete(c.value.$el.querySelector("input")),h.addListener("place_changed",N))});function w(y){if(!a){alert("請先登入才能新增標籤");return}const g=y.latLng.lat(),O=y.latLng.lng();if(!window.confirm("確定要在這個位置新增標籤嗎？"))return;new google.maps.Geocoder().geocode({location:{lat:g,lng:O}},(q,D)=>{let W="";D==="OK"&&q[0]?W=q[0].formatted_address:W=`${g.toFixed(5)}, ${O.toFixed(5)}`,n.value.push({position:{lat:g,lng:O},address:W,comments:[],owner:a}),E()})}function k(y){i.value=y,m.value=n.value[y].comments||[],l.value=!0}function b(){l.value=!1,d.value="",m.value=[],i.value=null}function E(){localStorage.setItem("markers",JSON.stringify(n.value))}function P(){if(!a){alert("請先登入才能留言");return}if(!d.value.trim())return;const y={id:ir(),user:a,content:d.value,createdAt:new Date().toISOString()};n.value[i.value].comments.push(y),d.value="",E()}function R(y){i.value!==null&&(n.value[i.value].comments.splice(y,1),m.value=n.value[i.value].comments,E())}function $(y,g){if(y.user!==a)return;window.confirm("確定要刪除這則留言嗎？")&&R(g)}function J(){if(i.value===null)return;if(n.value[i.value].owner!==a){alert("你不是這個標籤的建立者，無法刪除");return}n.value.splice(i.value,1),b(),E()}function N(){if(!a){alert("請先登入才能新增標籤");return}if(!h)return;const y=h.getPlace();if(!y.geometry){alert("找不到該地址，請確認輸入是否正確");return}const g=y.geometry.location.lat(),O=y.geometry.location.lng(),v=y.formatted_address||`${g.toFixed(5)}, ${O.toFixed(5)}`;window.confirm(`確定要在 ${v} 建立標籤嗎？`)&&(n.value.push({position:{lat:g,lng:O},address:v,comments:[],owner:a}),o.value={lat:g,lng:O},E(),f.value="")}return H(n,E,{deep:!0}),(y,g)=>{const O=Be("v-list-item-content");return j(),F(et,null,{default:I(()=>[te("div",null,[x($e,{modelValue:f.value,"onUpdate:modelValue":g[0]||(g[0]=v=>f.value=v),label:"搜尋地址",ref_key:"addressInput",ref:c,onKeyup:De(N,["enter"]),"append-icon":"mdi-magnify","onClick:append":N,class:"mb-4 elevation-1 rounded-lg",outlined:"",dense:"","hide-details":"",density:"comfortable",color:"primary",style:{"background-color":"#ffffff"}},null,8,["modelValue"]),x(z(vt),{"api-key":z(t),libraries:["places"],style:{width:"100%",height:"500px"},center:o.value,zoom:15,onClick:w},{default:I(()=>[(j(!0),M(ae,null,oe(n.value,(v,_)=>{var q;return j(),F(z(kt),{key:_,options:{position:v.position,label:{text:(q=v.comments)==null?void 0:q.length.toString(),color:"white",fontSize:"14px",fontWeight:"bold"},title:v.address||"未命名地址"},onClick:D=>k(_)},null,8,["options","onClick"])}),128)),x(Fe,{modelValue:l.value,"onUpdate:modelValue":g[2]||(g[2]=v=>l.value=v),"max-width":"500px"},{default:I(()=>[x(ze,{class:"pa-4 rounded-xl elevation-2"},{default:I(()=>[x(Ge,{class:"text-h6 font-weight-bold"},{default:I(()=>{var v,_,q;return[g[3]||(g[3]=V(" 標籤留言 ",-1)),i.value!==null?(j(),M("div",lr,G(((v=n.value[i.value])==null?void 0:v.address)||`${(_=n.value[i.value])==null?void 0:_.position.lat.toFixed(5)}, ${(q=n.value[i.value])==null?void 0:q.position.lng.toFixed(5)}`),1)):ne("",!0)]}),_:1,__:[3]}),x(Ke,null,{default:I(()=>[m.value.length?(j(),M("div",sr,[x(Je,null,{default:I(()=>[(j(!0),M(ae,null,oe(m.value,(v,_)=>(j(),F(We,{key:_,"prepend-avatar":`https://api.dicebear.com/9.x/thumbs/png/seed=${v.user}`,class:"hoverable",onClick:q=>$(v,_),style:{borderRadius:"8px",backgroundColor:"#f9f9f9",padding:"8px 16px",marginBottom:"8px"}},{default:I(()=>[x(O,null,{default:I(()=>[x(Xe,{class:"font-weight-bold",style:ie({color:s(v.user)})},{default:I(()=>[V(G(v.user)+" ",1),te("span",ur,G(new Date(v.createdAt).toLocaleString()),1)]),_:2},1032,["style"]),x(Qe,{class:"text-body-2",style:ie({color:s(v.user)})},{default:I(()=>[V(G(v.content),1)]),_:2},1032,["style"])]),_:2},1024)]),_:2},1032,["prepend-avatar","onClick"]))),128))]),_:1})])):(j(),M("div",cr,"目前沒有留言")),x(Ye,{modelValue:d.value,"onUpdate:modelValue":g[1]||(g[1]=v=>d.value=v),label:"新增留言",rows:"1","auto-grow":"",class:"mt-2",outlined:"",dense:"",style:{borderRadius:"8px",backgroundColor:"#f5f5f5"}},null,8,["modelValue"])]),_:1}),x(Ze,null,{default:I(()=>[x(He),x(Q,{text:"",onClick:b,class:"text--primary"},{default:I(()=>g[4]||(g[4]=[V("關閉",-1)])),_:1,__:[4]}),i.value!==null&&n.value[i.value].owner===z(a)?(j(),F(Q,{key:0,color:"red",onClick:J},{default:I(()=>g[5]||(g[5]=[V(" 刪除標籤 ",-1)])),_:1,__:[5]})):ne("",!0),x(Q,{color:"primary",onClick:P},{default:I(()=>g[6]||(g[6]=[V("送出留言",-1)])),_:1,__:[6]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["api-key","center"])])]),_:1})}}};typeof le=="function"&&le(Te);const br=Ue(Te,[["__scopeId","data-v-7feb4f13"]]);export{br as default};
