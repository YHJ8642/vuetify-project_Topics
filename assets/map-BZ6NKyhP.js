import{bk as _e,R as Se,r as C,aQ as J,v as Te,z as Y,c2 as ee,A as Ee,f as V,o as j,d as te,c3 as Me,c4 as Ae,c5 as Re,y as qe,aR as W,au as N,aw as Ve,a as $e,b as Be,c as G,w as S,e as E,ay as Ne,c6 as De,g as K,F as ae,i as oe,aF as Ue,aA as Fe,aB as ze,k as A,aa as ne,t as Z,aD as Ge,am as ie,aE as Ke,h as Ze,j as Q}from"./index-BkXVUP4J.js";import{b as le}from"./route-block-B_A1xBdJ.js";import{V as He}from"./VList-RIBcJENr.js";import{V as We,a as Xe,b as Je}from"./VListItem-BO9U59ef.js";import{V as Qe}from"./VTextarea-iJLYbPS4.js";import{V as Ye}from"./VContainer-Ce8WF8IB.js";import"./ssrBoot-COcuTDjh.js";import"./VDivider-kGA4nTc7.js";(function(){try{if(typeof document<"u"){var t=document.createElement("style");t.appendChild(document.createTextNode(".mapdiv[data-v-289550ca]{width:100%;height:100%}.advanced-marker-wrapper{display:none}.mapdiv .advanced-marker-wrapper{display:inline-block}.custom-control-wrapper[data-v-ab9120cd]{display:none}.mapdiv .custom-control-wrapper[data-v-ab9120cd]{display:inline-block}.info-window-wrapper[data-v-f0c09f6e]{display:none}.mapdiv .info-window-wrapper[data-v-f0c09f6e]{display:inline-block}.custom-marker-wrapper[data-v-2d2d343a]{display:none}.mapdiv .custom-marker-wrapper[data-v-2d2d343a]{display:inline-block}")),document.head.appendChild(t)}}catch(e){console.error("vite-plugin-css-injected-by-js",e)}})();var et=Object.defineProperty,tt=(t,e,r)=>e in t?et(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,se=(t,e,r)=>(tt(t,typeof e!="symbol"?e+"":e,r),r);const Oe=Symbol("map"),Ie=Symbol("api"),rt=Symbol("marker"),at=Symbol("markerCluster"),je=Symbol("CustomMarker"),ot=Symbol("mapTilesLoaded"),xe=["click","dblclick","drag","dragend","dragstart","mousedown","mousemove","mouseout","mouseover","mouseup","rightclick"];function nt(t,e,r,o){function a(n){return n instanceof r?n:new r(function(i){i(n)})}return new(r||(r=Promise))(function(n,i){function l(f){try{h(o.next(f))}catch(c){i(c)}}function d(f){try{h(o.throw(f))}catch(c){i(c)}}function h(f){f.done?n(f.value):a(f.value).then(l,d)}h((o=o.apply(t,[])).next())})}function it(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var ue,ce;function lt(){return ce||(ce=1,ue=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var o,a,n;if(Array.isArray(e)){if(o=e.length,o!=r.length)return!1;for(a=o;a--!==0;)if(!t(e[a],r[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(n=Object.keys(e),o=n.length,o!==Object.keys(r).length)return!1;for(a=o;a--!==0;)if(!Object.prototype.hasOwnProperty.call(r,n[a]))return!1;for(a=o;a--!==0;){var i=n[a];if(!t(e[i],r[i]))return!1}return!0}return e!==e&&r!==r}),ue}var st=lt(),ut=it(st);const de="__googleMapsScriptId";var $;(function(t){t[t.INITIALIZED=0]="INITIALIZED",t[t.LOADING=1]="LOADING",t[t.SUCCESS=2]="SUCCESS",t[t.FAILURE=3]="FAILURE"})($||($={}));class L{constructor({apiKey:e,authReferrerPolicy:r,channel:o,client:a,id:n=de,language:i,libraries:l=[],mapIds:d,nonce:h,region:f,retries:c=3,url:g="https://maps.googleapis.com/maps/api/js",version:u}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=e,this.authReferrerPolicy=r,this.channel=o,this.client=a,this.id=n||de,this.language=i,this.libraries=l,this.mapIds=d,this.nonce=h,this.region=f,this.retries=c,this.url=g,this.version=u,L.instance){if(!ut(this.options,L.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(L.instance.options)}`);return L.instance}L.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?$.FAILURE:this.done?$.SUCCESS:this.loading?$.LOADING:$.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let e=this.url;return e+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(e+=`&key=${this.apiKey}`),this.channel&&(e+=`&channel=${this.channel}`),this.client&&(e+=`&client=${this.client}`),this.libraries.length>0&&(e+=`&libraries=${this.libraries.join(",")}`),this.language&&(e+=`&language=${this.language}`),this.region&&(e+=`&region=${this.region}`),this.version&&(e+=`&v=${this.version}`),this.mapIds&&(e+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(e+=`&auth_referrer_policy=${this.authReferrerPolicy}`),e}deleteScript(){const e=document.getElementById(this.id);e&&e.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((e,r)=>{this.loadCallback(o=>{o?r(o.error):e(window.google)})})}importLibrary(e){return this.execute(),google.maps.importLibrary(e)}loadCallback(e){this.callbacks.push(e),this.execute()}setScript(){var e,r;if(document.getElementById(this.id)){this.callback();return}const o={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(o).forEach(n=>!o[n]&&delete o[n]),!((r=(e=window==null?void 0:window.google)===null||e===void 0?void 0:e.maps)===null||r===void 0)&&r.importLibrary||(n=>{let i,l,d,h="The Google Maps JavaScript API",f="google",c="importLibrary",g="__ib__",u=document,s=window;s=s[f]||(s[f]={});const p=s.maps||(s.maps={}),b=new Set,w=new URLSearchParams,k=()=>i||(i=new Promise((I,x)=>nt(this,void 0,void 0,function*(){var M;yield l=u.createElement("script"),l.id=this.id,w.set("libraries",[...b]+"");for(d in n)w.set(d.replace(/[A-Z]/g,U=>"_"+U[0].toLowerCase()),n[d]);w.set("callback",f+".maps."+g),l.src=this.url+"?"+w,p[g]=I,l.onerror=()=>i=x(Error(h+" could not load.")),l.nonce=this.nonce||((M=u.querySelector("script[nonce]"))===null||M===void 0?void 0:M.nonce)||"",u.head.append(l)})));p[c]?console.warn(h+" only loads once. Ignoring:",n):p[c]=(I,...x)=>b.add(I)&&k().then(()=>p[c](I,...x))})(o);const a=this.libraries.map(n=>this.importLibrary(n));a.length||a.push(this.importLibrary("core")),Promise.all(a).then(()=>this.callback(),n=>{const i=new ErrorEvent("error",{error:n});this.loadErrorCallback(i)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(e){if(this.errors.push(e),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=e,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(e=>{e(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}function ct(t){return class extends t.OverlayView{constructor(e){super(),se(this,"element"),se(this,"opts");const{element:r,...o}=e;this.element=r,this.opts=o,this.opts.map&&this.setMap(this.opts.map)}getPosition(){return this.opts.position?this.opts.position instanceof t.LatLng?this.opts.position:new t.LatLng(this.opts.position):null}getVisible(){if(!this.element)return!1;const e=this.element;return e.style.display!=="none"&&e.style.visibility!=="hidden"&&(e.style.opacity===""||Number(e.style.opacity)>.01)}onAdd(){if(!this.element)return;const e=this.getPanes();e&&e.overlayMouseTarget.appendChild(this.element)}draw(){if(!this.element)return;const e=this.getProjection(),r=e==null?void 0:e.fromLatLngToDivPixel(this.getPosition());if(r){this.element.style.position="absolute";let o,a;switch(this.opts.anchorPoint){case"TOP_CENTER":o="-50%",a="-100%";break;case"BOTTOM_CENTER":o="-50%",a="0";break;case"LEFT_CENTER":o="-100%",a="-50%";break;case"RIGHT_CENTER":o="0",a="-50%";break;case"TOP_LEFT":o="-100%",a="-100%";break;case"TOP_RIGHT":o="0",a="-100%";break;case"BOTTOM_LEFT":o="-100%",a="0";break;case"BOTTOM_RIGHT":o="0",a="0";break;default:o="-50%",a="-50%"}const n=r.x+(this.opts.offsetX||0)+"px",i=r.y+(this.opts.offsetY||0)+"px";this.element.style.transform=`translateX(${o}) translateX(${n}) translateY(${a}) translateY(${i})`,this.opts.zIndex&&(this.element.style.zIndex=this.opts.zIndex.toString())}}onRemove(){this.element&&this.element.remove()}setOptions(e){const{element:r,...o}=e;this.element=r,this.opts=o,this.draw()}}}let pe;const fe=["bounds_changed","center_changed","click","contextmenu","dblclick","drag","dragend","dragstart","heading_changed","idle","isfractionalzoomenabled_changed","mapcapabilities_changed","maptypeid_changed","mousemove","mouseout","mouseover","projection_changed","renderingtype_changed","rightclick","tilesloaded","tilt_changed","zoom_changed"],dt=_e({props:{apiPromise:{type:Promise},apiKey:{type:String,default:""},version:{type:String,default:"weekly"},libraries:{type:Array,default:()=>["places","marker"]},region:{type:String,required:!1},language:{type:String,required:!1},backgroundColor:{type:String,required:!1},center:{type:Object,default:()=>({lat:0,lng:0})},clickableIcons:{type:Boolean,required:!1,default:void 0},colorScheme:{type:String,required:!1},controlSize:{type:Number,required:!1},disableDefaultUi:{type:Boolean,required:!1,default:void 0},disableDoubleClickZoom:{type:Boolean,required:!1,default:void 0},draggable:{type:Boolean,required:!1,default:void 0},draggableCursor:{type:String,required:!1},draggingCursor:{type:String,required:!1},fullscreenControl:{type:Boolean,required:!1,default:void 0},fullscreenControlPosition:{type:String,required:!1},gestureHandling:{type:String,required:!1},heading:{type:Number,required:!1},isFractionalZoomEnabled:{type:Boolean,required:!1,default:void 0},keyboardShortcuts:{type:Boolean,required:!1,default:void 0},mapTypeControl:{type:Boolean,required:!1,default:void 0},mapTypeControlOptions:{type:Object,required:!1},mapTypeId:{type:[Number,String],required:!1},mapId:{type:String,required:!1},maxZoom:{type:Number,required:!1},minZoom:{type:Number,required:!1},noClear:{type:Boolean,required:!1,default:void 0},panControl:{type:Boolean,required:!1,default:void 0},panControlPosition:{type:String,required:!1},restriction:{type:Object,required:!1},rotateControl:{type:Boolean,required:!1,default:void 0},rotateControlPosition:{type:String,required:!1},scaleControl:{type:Boolean,required:!1,default:void 0},scaleControlStyle:{type:Number,required:!1},scrollwheel:{type:Boolean,required:!1,default:void 0},streetView:{type:Object,required:!1},streetViewControl:{type:Boolean,required:!1,default:void 0},streetViewControlPosition:{type:String,required:!1},styles:{type:Array,required:!1},tilt:{type:Number,required:!1},zoom:{type:Number,required:!1},zoomControl:{type:Boolean,required:!1,default:void 0},zoomControlPosition:{type:String,required:!1},cameraControl:{type:Boolean,required:!1,default:void 0},cameraControlPosition:{type:String,required:!1},nonce:{type:String,default:""}},emits:fe,setup(t,{emit:e}){const r=C(),o=C(!1),a=C(),n=C(),i=C(!1);W(Oe,a),W(Ie,n),W(ot,i);const l=()=>{const c={...t};Object.keys(c).forEach(s=>{c[s]===void 0&&delete c[s]});const g=s=>{var p;return s?{position:(p=n.value)==null?void 0:p.ControlPosition[s]}:{}},u={scaleControlOptions:t.scaleControlStyle?{style:t.scaleControlStyle}:{},panControlOptions:g(t.panControlPosition),zoomControlOptions:g(t.zoomControlPosition),rotateControlOptions:g(t.rotateControlPosition),streetViewControlOptions:g(t.streetViewControlPosition),fullscreenControlOptions:g(t.fullscreenControlPosition),cameraControlOptions:g(t.cameraControlPosition),disableDefaultUI:t.disableDefaultUi};return{...c,...u}},d=Y([n,a],([c,g])=>{const u=c,s=g;u&&s&&(u.event.addListenerOnce(s,"tilesloaded",()=>{i.value=!0}),setTimeout(d,0))},{immediate:!0}),h=()=>{try{const{apiKey:c,region:g,version:u,language:s,libraries:p,nonce:b}=t;pe=new L({apiKey:c,region:g,version:u,language:s,libraries:p,nonce:b})}catch(c){console.error(c)}},f=c=>{n.value=ee(c.maps),a.value=ee(new c.maps.Map(r.value,l()));const g=ct(n.value);n.value[je]=g,fe.forEach(s=>{var p;(p=a.value)==null||p.addListener(s,b=>e(s,b))}),o.value=!0;const u=Object.keys(t).filter(s=>!["apiPromise","apiKey","version","libraries","region","language","center","zoom","nonce"].includes(s)).map(s=>Se(t,s));Y([()=>t.center,()=>t.zoom,...u],([s,p],[b,w])=>{var k,I,x;const{center:M,zoom:U,...X}=l();(k=a.value)==null||k.setOptions(X),p!==void 0&&p!==w&&((I=a.value)==null||I.setZoom(p));const B=!b||s.lng!==b.lng||s.lat!==b.lat;s&&B&&((x=a.value)==null||x.panTo(s))})};return qe(()=>{t.apiPromise&&t.apiPromise instanceof Promise?t.apiPromise.then(f):(h(),pe.load().then(f))}),Ee(()=>{var c;i.value=!1,a.value&&((c=n.value)==null||c.event.clearInstanceListeners(a.value))}),{mapRef:r,ready:o,map:a,api:n,mapTilesLoaded:i}}}),pt=(t,e)=>{const r=t.__vccOpts||t;for(const[o,a]of e)r[o]=a;return r},ft={ref:"mapRef",class:"mapdiv"};function mt(t,e,r,o,a,n){return j(),V("div",null,[te("div",ft,null,512),Me(t.$slots,"default",Ae(Re({ready:t.ready,map:t.map,api:t.api,mapTilesLoaded:t.mapTilesLoaded})),void 0,!0)])}const ht=pt(dt,[["render",mt],["__scopeId","data-v-289550ca"]]);function vt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var gt=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var o,a,n;if(Array.isArray(e)){if(o=e.length,o!=r.length)return!1;for(a=o;a--!==0;)if(!t(e[a],r[a]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(n=Object.keys(e),o=n.length,o!==Object.keys(r).length)return!1;for(a=o;a--!==0;)if(!Object.prototype.hasOwnProperty.call(r,n[a]))return!1;for(a=o;a--!==0;){var i=n[a];if(!t(e[i],r[i]))return!1}return!0}return e!==e&&r!==r};const yt=vt(gt),bt=(t,e,r,o)=>{const a=C(),n=J(Oe,C()),i=J(Ie,C()),l=J(at,C()),d=Te(()=>!!(l.value&&i.value&&(a.value instanceof i.value.Marker||a.value instanceof i.value[je])));return Y([n,r],(h,[f,c])=>{var g,u,s;const p=!yt(r.value,c)||n.value!==f;!n.value||!i.value||!p||(a.value?(a.value.setOptions(r.value),d.value&&((g=l.value)==null||g.removeMarker(a.value),(u=l.value)==null||u.addMarker(a.value))):(a.value=ee(new i.value[t](r.value)),a.value&&(d.value?(s=l.value)==null||s.addMarker(a.value):a.value.setMap(n.value)),e.forEach(b=>{var w;(w=a.value)==null||w.addListener(b,k=>o(b,k))})))},{immediate:!0,flush:"post"}),Ee(()=>{var h,f;a.value&&((h=i.value)==null||h.event.clearInstanceListeners(a.value),d.value?(f=l.value)==null||f.removeMarker(a.value):a.value.setMap(null))}),a},me=["animation_changed","click","dblclick","rightclick","dragstart","dragend","drag","mouseover","mousedown","mouseout","mouseup","draggable_changed","clickable_changed","contextmenu","cursor_changed","flat_changed","zindex_changed","icon_changed","position_changed","shape_changed","title_changed","visible_changed"],kt=_e({name:"Marker",props:{options:{type:Object,required:!0}},emits:me,setup(t,{emit:e,expose:r,slots:o}){const a=Se(t,"options"),n=bt("Marker",me,a,e);return W(rt,n),r({marker:n}),()=>{var i;return(i=o.default)==null?void 0:i.call(o)}}});xe.concat(["bounds_changed"]);xe.concat(["center_changed","radius_changed"]);var wt=Object.getOwnPropertyNames,Ct=Object.getOwnPropertySymbols,_t=Object.prototype.hasOwnProperty;function he(t,e){return function(r,o,a){return t(r,o,a)&&e(r,o,a)}}function H(t){return function(e,r,o){if(!e||!r||typeof e!="object"||typeof r!="object")return t(e,r,o);var a=o.cache,n=a.get(e),i=a.get(r);if(n&&i)return n===r&&i===e;a.set(e,r),a.set(r,e);var l=t(e,r,o);return a.delete(e),a.delete(r),l}}function ve(t){return wt(t).concat(Ct(t))}var St=Object.hasOwn||function(t,e){return _t.call(t,e)};function T(t,e){return t===e||!t&&!e&&t!==t&&e!==e}var Et="__v",qt="__o",Ot="_owner",ge=Object.getOwnPropertyDescriptor,ye=Object.keys;function It(t,e,r){var o=t.length;if(e.length!==o)return!1;for(;o-- >0;)if(!r.equals(t[o],e[o],o,o,t,e,r))return!1;return!0}function jt(t,e){return T(t.getTime(),e.getTime())}function xt(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function Pt(t,e){return t===e}function be(t,e,r){var o=t.size;if(o!==e.size)return!1;if(!o)return!0;for(var a=new Array(o),n=t.entries(),i,l,d=0;(i=n.next())&&!i.done;){for(var h=e.entries(),f=!1,c=0;(l=h.next())&&!l.done;){if(a[c]){c++;continue}var g=i.value,u=l.value;if(r.equals(g[0],u[0],d,c,t,e,r)&&r.equals(g[1],u[1],g[0],u[0],t,e,r)){f=a[c]=!0;break}c++}if(!f)return!1;d++}return!0}var Lt=T;function Tt(t,e,r){var o=ye(t),a=o.length;if(ye(e).length!==a)return!1;for(;a-- >0;)if(!Pe(t,e,r,o[a]))return!1;return!0}function D(t,e,r){var o=ve(t),a=o.length;if(ve(e).length!==a)return!1;for(var n,i,l;a-- >0;)if(n=o[a],!Pe(t,e,r,n)||(i=ge(t,n),l=ge(e,n),(i||l)&&(!i||!l||i.configurable!==l.configurable||i.enumerable!==l.enumerable||i.writable!==l.writable)))return!1;return!0}function Mt(t,e){return T(t.valueOf(),e.valueOf())}function At(t,e){return t.source===e.source&&t.flags===e.flags}function ke(t,e,r){var o=t.size;if(o!==e.size)return!1;if(!o)return!0;for(var a=new Array(o),n=t.values(),i,l;(i=n.next())&&!i.done;){for(var d=e.values(),h=!1,f=0;(l=d.next())&&!l.done;){if(!a[f]&&r.equals(i.value,l.value,i.value,l.value,t,e,r)){h=a[f]=!0;break}f++}if(!h)return!1}return!0}function Rt(t,e){var r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(t[r]!==e[r])return!1;return!0}function Vt(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function Pe(t,e,r,o){return(o===Ot||o===qt||o===Et)&&(t.$$typeof||e.$$typeof)?!0:St(e,o)&&r.equals(t[o],e[o],o,o,t,e,r)}var $t="[object Arguments]",Bt="[object Boolean]",Nt="[object Date]",Dt="[object Error]",Ut="[object Map]",Ft="[object Number]",zt="[object Object]",Gt="[object RegExp]",Kt="[object Set]",Zt="[object String]",Ht="[object URL]",Wt=Array.isArray,we=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Ce=Object.assign,Xt=Object.prototype.toString.call.bind(Object.prototype.toString);function Jt(t){var e=t.areArraysEqual,r=t.areDatesEqual,o=t.areErrorsEqual,a=t.areFunctionsEqual,n=t.areMapsEqual,i=t.areNumbersEqual,l=t.areObjectsEqual,d=t.arePrimitiveWrappersEqual,h=t.areRegExpsEqual,f=t.areSetsEqual,c=t.areTypedArraysEqual,g=t.areUrlsEqual;return function(u,s,p){if(u===s)return!0;if(u==null||s==null)return!1;var b=typeof u;if(b!==typeof s)return!1;if(b!=="object")return b==="number"?i(u,s,p):b==="function"?a(u,s,p):!1;var w=u.constructor;if(w!==s.constructor)return!1;if(w===Object)return l(u,s,p);if(Wt(u))return e(u,s,p);if(we!=null&&we(u))return c(u,s,p);if(w===Date)return r(u,s,p);if(w===RegExp)return h(u,s,p);if(w===Map)return n(u,s,p);if(w===Set)return f(u,s,p);var k=Xt(u);return k===Nt?r(u,s,p):k===Gt?h(u,s,p):k===Ut?n(u,s,p):k===Kt?f(u,s,p):k===zt?typeof u.then!="function"&&typeof s.then!="function"&&l(u,s,p):k===Ht?g(u,s,p):k===Dt?o(u,s,p):k===$t?l(u,s,p):k===Bt||k===Ft||k===Zt?d(u,s,p):!1}}function Qt(t){var e=t.circular,r=t.createCustomConfig,o=t.strict,a={areArraysEqual:o?D:It,areDatesEqual:jt,areErrorsEqual:xt,areFunctionsEqual:Pt,areMapsEqual:o?he(be,D):be,areNumbersEqual:Lt,areObjectsEqual:o?D:Tt,arePrimitiveWrappersEqual:Mt,areRegExpsEqual:At,areSetsEqual:o?he(ke,D):ke,areTypedArraysEqual:o?D:Rt,areUrlsEqual:Vt};if(r&&(a=Ce({},a,r(a))),e){var n=H(a.areArraysEqual),i=H(a.areMapsEqual),l=H(a.areObjectsEqual),d=H(a.areSetsEqual);a=Ce({},a,{areArraysEqual:n,areMapsEqual:i,areObjectsEqual:l,areSetsEqual:d})}return a}function Yt(t){return function(e,r,o,a,n,i,l){return t(e,r,l)}}function er(t){var e=t.circular,r=t.comparator,o=t.createState,a=t.equals,n=t.strict;if(o)return function(l,d){var h=o(),f=h.cache,c=f===void 0?e?new WeakMap:void 0:f,g=h.meta;return r(l,d,{cache:c,equals:a,meta:g,strict:n})};if(e)return function(l,d){return r(l,d,{cache:new WeakMap,equals:a,meta:void 0,strict:n})};var i={cache:void 0,equals:a,meta:void 0,strict:n};return function(l,d){return r(l,d,i)}}P();P({strict:!0});P({circular:!0});P({circular:!0,strict:!0});P({createInternalComparator:function(){return T}});P({strict:!0,createInternalComparator:function(){return T}});P({circular:!0,createInternalComparator:function(){return T}});P({circular:!0,createInternalComparator:function(){return T},strict:!0});function P(t){t===void 0&&(t={});var e=t.circular,r=e===void 0?!1:e,o=t.createInternalComparator,a=t.createState,n=t.strict,i=n===void 0?!1:n,l=Qt(t),d=Jt(l),h=o?o(d):Yt(d);return er({circular:r,comparator:d,createState:a,equals:h,strict:i})}var re;(function(t){t.CLUSTERING_BEGIN="clusteringbegin",t.CLUSTERING_END="clusteringend",t.CLUSTER_CLICK="click",t.GMP_CLICK="gmp-click"})(re||(re={}));Object.values(re);const R={getMarkers(){return N.api.get("/markers")},addMarker(t){return N.apiAuth.post("/markers",t)},deleteMarker(t){return N.apiAuth.delete(`/markers/${t}`)},addComment(t,e){return N.apiAuth.post(`/markers/${t}/comments`,e)},deleteComment(t,e,r){return N.apiAuth.delete(`/markers/${t}/comments/${e}`,{data:r})}},tr={key:0,class:"text-caption grey--text mt-1"},rr={key:0,style:{"max-height":"420px","overflow-y":"auto"}},ar={class:"text-caption grey--text ml-2"},or={key:1,class:"text-center grey--text"},Le={__name:"map",setup(t){const e="AIzaSyAFZNUQdaGX43QtTDpNcMXlBDjiNCWHCiU",r=$e(),o=r.isLoggedIn?r.account:null,a=C({lat:25.033964,lng:121.564468}),n=C([]),i=C(null),l=C(!1),d=C(""),h=C([]),f=C(""),c=C(null);let g=null;const u={};function s(v){return u[v]||(u[v]=`hsl(${Math.floor(Math.random()*360)}, 70%, 50%)`),u[v]}function p(){return new Promise(v=>{var m,q;if((q=(m=window.google)==null?void 0:m.maps)!=null&&q.places)v();else{const y=setInterval(()=>{var _,O;(O=(_=window.google)==null?void 0:_.maps)!=null&&O.places&&(clearInterval(y),v())},100)}})}async function b(){try{const v=await R.getMarkers();n.value=v.data.result||[]}catch(v){console.error("取得標籤失敗:",v)}}qe(async()=>{await b(),await p(),c.value&&(g=new google.maps.places.Autocomplete(c.value.$el.querySelector("input")),g.addListener("place_changed",B))});async function w(v){if(!o)return alert("請先登入");const m=v.latLng.lat(),q=v.latLng.lng();if(!window.confirm("確定新增標籤？"))return;new google.maps.Geocoder().geocode({location:{lat:m,lng:q}},async(_,O)=>{const F=O==="OK"&&_[0]?_[0].formatted_address:`${m.toFixed(5)}, ${q.toFixed(5)}`;try{const z=await R.addMarker({position:{lat:m,lng:q},address:F,owner:o});n.value.push(z.data.result)}catch(z){console.error(z),alert("新增標籤失敗")}})}function k(v){i.value=v,h.value=n.value[v].comments||[],l.value=!0}function I(){l.value=!1,d.value="",h.value=[],i.value=null}async function x(){if(!o||!d.value.trim())return;const v=n.value[i.value];try{const m=await R.addComment(v._id,{user:o,content:d.value});v.comments.push(m.data.result),h.value=v.comments,d.value=""}catch(m){console.error(m),alert("新增留言失敗")}}async function M(v){if(i.value===null)return;const m=n.value[i.value],q=m.comments[v];try{await R.deleteComment(m._id,q._id,{user:o}),m.comments.splice(v,1),h.value=m.comments}catch(y){console.error(y),alert("刪除留言失敗")}}function U(v,m){v.user===o&&window.confirm("確定要刪除這則留言嗎？")&&M(m)}async function X(){if(i.value===null)return;const v=n.value[i.value];if(v.owner!==o)return alert("你不是標籤建立者");if(window.confirm("確定刪除標籤？"))try{await R.deleteMarker(v._id),n.value.splice(i.value,1),I()}catch(m){console.error(m),alert("刪除標籤失敗")}}async function B(){if(!o)return alert("請先登入");if(!g)return;const v=g.getPlace();if(!v.geometry)return alert("找不到該地址");const m=v.geometry.location.lat(),q=v.geometry.location.lng(),y=v.formatted_address||`${m.toFixed(5)}, ${q.toFixed(5)}`;if(window.confirm(`確定新增標籤 ${y}？`))try{const _=await R.addMarker({position:{lat:m,lng:q},address:y,owner:o});n.value.push(_.data.result),a.value={lat:m,lng:q},f.value=""}catch(_){console.error(_),alert("新增標籤失敗")}}return(v,m)=>{const q=Be("v-list-item-content");return j(),G(Ye,null,{default:S(()=>[te("div",null,[E(Ne,{modelValue:f.value,"onUpdate:modelValue":m[0]||(m[0]=y=>f.value=y),label:"搜尋地址",ref_key:"addressInput",ref:c,onKeyup:De(B,["enter"]),"append-icon":"mdi-magnify","onClick:append":B,class:"mb-4 elevation-1 rounded-lg",outlined:"",dense:"","hide-details":"",density:"comfortable",color:"primary",style:{"background-color":"#ffffff"}},null,8,["modelValue"]),E(K(ht),{"api-key":K(e),libraries:["places"],style:{width:"100%",height:"500px"},center:a.value,zoom:15,onClick:w},{default:S(()=>[(j(!0),V(ae,null,oe(n.value,(y,_)=>{var O,F;return j(),G(K(kt),{key:y._id,options:{position:y.position,label:{text:((F=(O=y.comments)==null?void 0:O.length)==null?void 0:F.toString())||"0",color:"white",fontSize:"14px",fontWeight:"bold"},title:y.address||"未命名地址"},onClick:z=>k(_)},null,8,["options","onClick"])}),128)),E(Ue,{modelValue:l.value,"onUpdate:modelValue":m[2]||(m[2]=y=>l.value=y),"max-width":"500px"},{default:S(()=>[E(Fe,{class:"pa-4 rounded-xl elevation-2"},{default:S(()=>[E(ze,{class:"text-h6 font-weight-bold"},{default:S(()=>{var y,_,O;return[m[3]||(m[3]=A(" 標籤留言 ",-1)),i.value!==null?(j(),V("div",tr,Z(((y=n.value[i.value])==null?void 0:y.address)||`${(_=n.value[i.value])==null?void 0:_.position.lat.toFixed(5)}, ${(O=n.value[i.value])==null?void 0:O.position.lng.toFixed(5)}`),1)):ne("",!0)]}),_:1,__:[3]}),E(Ge,null,{default:S(()=>[h.value.length?(j(),V("div",rr,[E(He,null,{default:S(()=>[(j(!0),V(ae,null,oe(h.value,(y,_)=>(j(),G(We,{key:y._id,"prepend-avatar":`https://api.dicebear.com/9.x/thumbs/png/seed=${y.user}`,class:"hoverable",onClick:O=>U(y,_),style:{borderRadius:"8px",backgroundColor:"#f9f9f9",padding:"8px 16px",marginBottom:"8px"}},{default:S(()=>[E(q,null,{default:S(()=>[E(Xe,{class:"font-weight-bold",style:ie({color:s(y.user)})},{default:S(()=>[A(Z(y.user)+" ",1),te("span",ar,Z(new Date(y.createdAt).toLocaleString()),1)]),_:2},1032,["style"]),E(Je,{class:"text-body-2",style:ie({color:s(y.user)})},{default:S(()=>[A(Z(y.content),1)]),_:2},1032,["style"])]),_:2},1024)]),_:2},1032,["prepend-avatar","onClick"]))),128))]),_:1})])):(j(),V("div",or,"目前沒有留言")),E(Qe,{modelValue:d.value,"onUpdate:modelValue":m[1]||(m[1]=y=>d.value=y),label:"新增留言",rows:"1","auto-grow":"",class:"mt-2",outlined:"",dense:"",style:{borderRadius:"8px",backgroundColor:"#f5f5f5"}},null,8,["modelValue"])]),_:1}),E(Ke,null,{default:S(()=>[E(Ze),E(Q,{text:"",onClick:I,class:"text--primary"},{default:S(()=>m[4]||(m[4]=[A("關閉",-1)])),_:1,__:[4]}),i.value!==null&&n.value[i.value].owner===K(o)?(j(),G(Q,{key:0,color:"red",onClick:X},{default:S(()=>m[5]||(m[5]=[A(" 刪除標籤 ",-1)])),_:1,__:[5]})):ne("",!0),E(Q,{color:"primary",onClick:x},{default:S(()=>m[6]||(m[6]=[A("送出留言",-1)])),_:1,__:[6]})]),_:1})]),_:1})]),_:1},8,["modelValue"])]),_:1},8,["api-key","center"])])]),_:1})}}};typeof le=="function"&&le(Le);const fr=Ve(Le,[["__scopeId","data-v-61c1e494"]]);export{fr as default};
