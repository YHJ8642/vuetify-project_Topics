import{a as I,b as w}from"./VToolbar-DgECRdfp.js";import{p as P,r as A,s as f,v as u,D as R,z as y,y as L,A as k,l as x,O as N,R as H,B as z,S as M,m as U,Z as C,E as F,e as O,n as q}from"./index-BkXVUP4J.js";import{u as D}from"./ssrBoot-COcuTDjh.js";const W=P({scrollTarget:{type:String},scrollThreshold:{type:[String,Number],default:300}},"scroll");function Y(l){let b=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{canScroll:v}=b;let d=0,r=0;const e=A(null),s=f(0),o=f(0),m=f(0),p=f(!1),n=f(!1),c=u(()=>Number(l.scrollThreshold)),B=u(()=>R((c.value-s.value)/c.value||0)),h=()=>{const t=e.value;if(!t||v&&!v.value)return;d=s.value,s.value="window"in t?t.pageYOffset:t.scrollTop;const i=t instanceof Window?document.documentElement.scrollHeight:t.scrollHeight;if(r!==i){r=i;return}n.value=s.value<d,m.value=Math.abs(s.value-c.value)};return y(n,()=>{o.value=o.value||s.value}),y(p,()=>{o.value=0}),L(()=>{y(()=>l.scrollTarget,t=>{var S;const i=t?document.querySelector(t):window;i&&i!==e.value&&((S=e.value)==null||S.removeEventListener("scroll",h),e.value=i,e.value.addEventListener("scroll",h,{passive:!0}))},{immediate:!0})}),k(()=>{var t;(t=e.value)==null||t.removeEventListener("scroll",h)}),v&&y(v,h,{immediate:!0}),{scrollThreshold:c,currentScroll:s,currentThreshold:m,isScrollActive:p,scrollRatio:B,isScrollingUp:n,savedScroll:o}}const Z=P({scrollBehavior:String,modelValue:{type:Boolean,default:!0},location:{type:String,default:"top",validator:l=>["top","bottom"].includes(l)},...I(),...C(),...W(),height:{type:[Number,String],default:64}},"VAppBar"),K=x()({name:"VAppBar",props:Z(),emits:{"update:modelValue":l=>!0},setup(l,b){let{slots:v}=b;const d=A(),r=N(l,"modelValue"),e=u(()=>{var g;const a=new Set(((g=l.scrollBehavior)==null?void 0:g.split(" "))??[]);return{hide:a.has("hide"),fullyHide:a.has("fully-hide"),inverted:a.has("inverted"),collapse:a.has("collapse"),elevate:a.has("elevate"),fadeImage:a.has("fade-image")}}),s=u(()=>{const a=e.value;return a.hide||a.fullyHide||a.inverted||a.collapse||a.elevate||a.fadeImage||!r.value}),{currentScroll:o,scrollThreshold:m,isScrollingUp:p,scrollRatio:n}=Y(l,{canScroll:s}),c=H(()=>e.value.hide||e.value.fullyHide),B=u(()=>l.collapse||e.value.collapse&&(e.value.inverted?n.value>0:n.value===0)),h=u(()=>l.flat||e.value.fullyHide&&!r.value||e.value.elevate&&(e.value.inverted?o.value>0:o.value===0)),t=u(()=>e.value.fadeImage?e.value.inverted?1-n.value:n.value:void 0),i=u(()=>{var T,V;if(e.value.hide&&e.value.inverted)return 0;const a=((T=d.value)==null?void 0:T.contentHeight)??0,g=((V=d.value)==null?void 0:V.extensionHeight)??0;return c.value?o.value<m.value||e.value.fullyHide?a+g:a:a+g});z(()=>!!l.scrollBehavior,()=>{F(()=>{c.value?e.value.inverted?r.value=o.value>m.value:r.value=p.value||o.value<m.value:r.value=!0})});const{ssrBootStyles:S}=D(),{layoutItemStyles:E}=M({id:l.name,order:u(()=>parseInt(l.order,10)),position:H(()=>l.location),layoutSize:i,elementSize:f(void 0),active:r,absolute:H(()=>l.absolute)});return U(()=>{const a=w.filterProps(l);return O(w,q({ref:d,class:["v-app-bar",{"v-app-bar--bottom":l.location==="bottom"},l.class],style:[{...E.value,"--v-toolbar-image-opacity":t.value,height:void 0,...S.value},l.style]},a,{collapse:B.value,flat:h.value}),v)}),{}}});export{K as V};
